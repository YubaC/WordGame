<!DOCTYPE html>
<html lang="zh_cn">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文字游戏</title>
</head>

<body>
    <style>
        #save {
            padding: 10px;
            margin: 10px;
        }
        
        li {
            margin: 5px;
        }
        
        .up,
        .down,
        .left,
        .right,
        .boom {
            width: 50px;
            height: 50px;
            font-size: 24px;
        }
        
        .up,
        .right,
        .down,
        .boom {
            margin-left: 50px;
        }
        
        .up,
        .right,
        .down {
            margin-top: 10px;
        }
        
        .boom {
            margin-top: 50px;
        }
        
        .down {
            margin-bottom: 50px;
        }
        
        input {
            float: none;
        }
    </style>

    <p id="score" style="color: red;">Score:0</p>

    <!-- 画布 -->
    <p id="map"></p>

    <!-- 操作 -->
    <div class="button1" id="button">
        <button onclick="up()" class="up">↑</button><br>
        <button onclick="left()" class="left">←</button>
        <button onclick="right()" class="right">→</button><br>
        <button id="down" onclick="down()" class="down">↓</button>
    </div>
    <div class="button2" id="button">
        <button id="boom" onclick="boom()" class="boom">&#128163;</button><br>
    </div>
    <br>
    <div>
        <hr>
        <button id="save" onclick="save()">保存</button><br>
        <a href="javascript:void(0);" onClick="map_list_hide()" id="map_list_hide">隐藏地图列表</a>
        <a href="javascript:void(0);" onClick="map_list_show()" id="map_list_show">显示地图列表</a><br>
        <div id="editor">
            <a href="javascript:void(0);" onClick="edit(map_list, map_id, map_order)" id="edit">编辑</a>
            <a href="javascript:void(0);" onClick="exit_editing()" id="exit_editing">退出编辑</a><br>
            <ul id="maplist"></ul>
        </div>
    </div>
    <div>
        <hr>
        <input type="CheckBox" id="waterrun">河水蔓延<br>
        <input type="CheckBox" id="grassrun">草地蔓延<br>
        <div id="leftmain">
            <input type="CheckBox" onclick="ischeck(this);" id="left_main">惯用左手<br>
        </div>
        <input type="CheckBox" id="peace" checked="checked">和平<br>
        <input type="CheckBox" id="unmatched">无敌<br>
        <div>
            炸弹威力: <input type="range" id="boom_power" min="0" max="3" onchange="boompowerchange()" value="1"><span id="power">1</span><br>
        </div>
    </div>

    <a href="javascript:void(0);" onClick="show()" id="show">显示地图组件</a><br>

    <div id="hide">
        <hr>
        <textarea id="in" placeholder="导入地图" rows="15" cols="30"></textarea>
        <a href="javascript:void(0);" onClick="process()" id="do_process">加载地图</a><br>
        <a href="mapbuilder.html" id="show">编辑地图</a><br>
        <a href="explain.html" id="show">说明</a><br>
        <a href="javascript:void(0);" onClick="hide()" id="hide">隐藏地图组件</a>
    </div>
    <!--  
----------------→y
|
|
|
|
|
|
↓x -->
    <script src="js/DrawMap.js"></script>
    <script src="js/effects.js"></script>
    <script src="js/functions.js"></script>
    <script src="js/HideandShow.js"></script>
    <script src="js/judge.js"></script>
    <script src="js/Maps.js"></script>
    <script src="js/mob.js"></script>
    <script src="js/PlayerMove.js"></script>
    <script>
        var i = 0;
        var j = 0;
        var x_step;
        var y_step;
        x = 0;
        y = 0;
        x_old = 1;
        y_old = 1;
        boom_x = -1;
        boom_y = -1;
        block = "草";
        block_old = "草";
        mob_block = "草";
        mob_block_old = "草";
        mob_x = 1;
        mob_y = 1;
        mob_x_old = 0;
        mob_y_old = 0;

        boom_exist = false;

        var booming;

        boom_power = 1;

        var score = 0;

        map = new Array();

        var find_direction_times = 0;
        var find_place_times = 0;

        saved_before = false;

        map_list = new Array;
        map_list_input = new Array;
        map_id = new Array;
        map_id_input = new Array;
        map_order = new Array;
        map_order_input = new Array;

        //定义地图
        map = [
            ["草", "草", "水", "水", "水", "草", "草", "草", "草", "草", "草", "草"],
            ["草", "草", "水", "水", "水", "草", "草", "草", "草", "草", "草", "草"],
            ["草", "草", "水", "水", "水", "草", "草", "草", "草", "草", "草", "草"],
            ["草", "草", "水", "水", "水", "草", "草", "草", "草", "草", "草", "草"],
            ["草", "草", "水", "水", "水", "草", "草", "草", "草", "草", "草", "草"],
            ["草", "草", "水", "水", "水", "水", "水", "水", "桥", "桥", "水", "水"],
            ["草", "草", "水", "水", "水", "水", "水", "水", "桥", "桥", "水", "水"],
            ["草", "草", "水", "水", "水", "水", "水", "水", "桥", "桥", "水", "水"],
            ["草", "草", "草", "草", "草", "草", "草", "草", "草", "草", "草", "草"],
            ["草", "草", "草", "草", "草", "草", "草", "草", "草", "草", "草", "草"],
            ["草", "草", "草", "草", "草", "草", "草", "草", "草", "草", "草", "草"],
            ["草", "草", "草", "草", "草", "草", "草", "草", "草", "草", "草", "草"]
        ];

        word = ["水", "桥", "草", "人", "怪", "土"];
        color = ["blue", "orange", "green", "red", "red", "Sienna"];
        passable = ["草", "桥", "土", "怪"];

        //初始化
        drawmap();
        findwarter();
        findgrass();
        mob_move_prepare();
        boompowerchange();
        map_list_hide();
        browser_alert()
        window.onload = setlist(map_list, map_id, map_order);

        map_input = new Array();
        settings = new Array();

        hide(); //隐藏地图组件

        // map_list = ["2", "1", "5", "3", "4"];
        // map_id = ["1", "0", "4", "2", "3"];
        // map_order = ["0", "1", "2", "3", "4"];

        setlist(map_list, map_id, map_order);
    </script>

</body>

</html>